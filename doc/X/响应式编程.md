## 响应式编程

概念：**响应式编程**（Reactive programming）是一种面向数据流和变化传播的编程范式。这意味着可以在编程语言中很方便地表达静态或动态的数据流，而相关的计算模型会自动将变化的值通过数据流进行传播。

#### 响应式编程就是用异步数据流进行编程

这不是新理念。即使是最典型的点击事件也是一个异步事件流，从而可以对其进行侦测（observe）并进行相应操作。

可以基于任何东西创建数据流。流非常轻便，并且无处不在，**任何东西都可以是一个流：变量，用户输入，属性，缓存，数据结构等等**。例如，想象一下微博推文也可以是一个数据流，和点击事件一样。你可以对其进行侦听，并作相应反应。

**除些之外，有很多功能强大的函数，可以对这些流进行合并、过滤、转变等**。这就是 “函数式编程” 的强大之处。流可以作为另一个流的输入。甚至多个流也可以作为另一个流的输入。你也可以合并流，从流中过滤出你感兴趣的事件。你也可以将流中的数据值映射转换成另一个流。

**流是响应式的核心**，下面是 “在按钮上点击” 事件流。

![按钮点击事件流](https://camo.githubusercontent.com/36c0a9ffd8ed22236bd6237d44a1d3eecbaec336/687474703a2f2f692e696d6775722e636f6d2f634c344d4f73532e706e67)

流就是一个按时间顺序正在进行的事件序列(A stream is a sequence of ongoing events ordered in time)。

它可以发送 3 种不同的事物：

- 一个值（类型不限）
- 一个错误
- 或一个已完成(completed) 信号

例如，当包含该按钮的视图或窗口关闭时，流会发送 “completed” 信号。

我们只能异步捕获这些发送的事件，即定义：

- 一个函数，用于当一个值发送出来时再执行
- 定义另一个函数，用于当错误发送出来时执行
- 再定义一个函数，用于当 ‘completed’ 信号发送出来时执行

有时可只定义第一个函数，而忽略定义后两个函数。

对流的 “侦听” 又称为 **订阅(subscribing)**，而定义的函数即为 **观察者(observer)**，流就是 **主题(subject, observable)**。这是一个典型的观察者模式。

也可以用 ASCII 来画示意图：

```c++
--a---b-c---d---X---|->

a, b, c, d 都是发送出的值
X 是错误
| 是 'completed' 信号
---> 是时间线
```



##### 参考：

https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B

https://www.atjiang.com/intro-reactive-programming/